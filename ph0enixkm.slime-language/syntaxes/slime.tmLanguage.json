{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Slime",
	"patterns": [
		{
			"include": "#keywords"
		},
		{
			"include": "#strings"
		},
		{
			"include": "#commands"
		},
		{
			"include": "#chars"
		},
		{
			"include": "#commentLine"
		}
	],
	"repository": {
		"keywords": {
			"patterns": [
			{
				"match": "(box)\\s+(\\w\\S*)",
				
				"captures": {
					"1" : {
						"name" : "keyword.control.slime"
					},
					"2" : {
						"name" : "variable.name"
					}
				}
			},
			{
				"match": "(fun)\\s+(\\w[^\\(]+)",
				
				"captures": {
					"1" : {
						"name" : "keyword.control.magma"
					},
					"2" : {
						"name" : "entity.name.function"
					}
				}
			},	
			{
				"name": "keyword.control.slime",
				"match": "\\b(if|loop|in|silent|return|fun|else|break|continue|and|or|not|box)\\b"
			},
			{
				"match": "\\b(true|false)\\b(?![?!])",
				"name": "constant.language.boolean.slime"
			},
			{
				"match": "^\\s*\\d+\\s*$",
				"name": "constant.language.int.slime"
			},
			{
				"match": "[+-]?([0-9]*[.])?[0-9]+",
				"name": "constant.language.float.slime"
			},
			{
				"match": "\\b\\w+\\s*(?=\\([\\S\\s]*?\\)?)",
				"name": "entity.name.function"
			},
			{
				"match": "\\b[A-Z]\\w*\\b",
				"name": "entity.name.class.capital"
			},
			{
				"name" : "support.function.git-rebase.slime.symbol",
				"match" : "(\\+|\\-|\\^|\\*|\\=|\\||\\%)"
			},
			{
				"name" : "comment.block",
				"match": "(\\/\\*[\\w\\'\\s\\r\\n\\*]*\\*\\/)"
			},
			{
				"name" : "variable.name",
				"match" : "\\b\\w+\\b"
			}
			]
		},
		"string-insides" : {
			"patterns": [
				{
					"name": "constant.character.escape.slime",
					"match": "\\\\."
				},
				{
					"name": "keyword.control",
					"begin" : "\\{",
					"end" : "\\}",
					"patterns": [
						{
							"include" : "$self"
						}
					]
				}
			]
		},
		"command-insides" : {
			"patterns": [
				{
					"name": "constant.character.escape.slime",
					"match": "\\\\."
				},
				{
					"name": "constant.language",
					"match": "-{1,2}[A-Za-z0-9-_]+"
				},
				{
					"name": "support.function.git-rebase",
					"match": "[A-Za-z][A-Za-z0-9-_]+"
				},
				{
					"name": "keyword.control",
					"begin" : "\\{",
					"end" : "\\}",
					"patterns": [
						{
							"include" : "$self"
						}
					]
				}
			]
		},
		"strings": {
			"name": "string.quoted.single.slime",
			"begin": "'",
			"end": "'",
			"patterns": [
				{
					"include": "#string-insides"
				}
			]
		},
		"commands": {
			"name": "string.command.slime",
			"begin": "\\$",
			"end": "\\$",
			"patterns": [
				{
					"include": "#command-insides"
				}
			]
		},
		"commentLine" : {
			"name":"comment.line",
			"begin" : "#",
			"end" : "$",
			"patterns": [
				{
					"include": "#todos"
				}
			]
		},
		"todos" : {
			"patterns": [
				{
					"name": "keyword.control",
					"match": "\\b(TODO|QUESTION|FIXME)\\:*"
				},
				{
					"name": "variable.name",
					"match": "\\b(ERROR|IMPORTANT)\\:*"
				},
				{
					"name": "constant.name",
					"match": "\\b(WARNING)\\:*"
				}
			]
		}
	},
	"scopeName": "source.slime"
}
